<div class="absolute inset-0 flex flex-col min-w-0 items-center  overflow-y-auto bg-gray-100 p-6 sm:p-8" cdkScrollable>
    <div class="relative w-full flex-0 max-w-4xl sm:rounded-lg overflow-hidden">

        <div class="p-2 text-3xl font-semibold text-center text-gray-800">
            {{ 'Desembolso' }}
        </div>

        <mat-stepper [orientation]="'vertical'" [linear]="true" #stepper class="w-full px-6 py-4" [animationDuration]="'1500'">
            <!-- Primer paso: Consulta de empleado -->

            <mat-step [stepControl]="secondFormGroup" label="Verificar información">
                <div class="w-full">
                    <form [formGroup]="secondFormGroup" class="space-y-4 w-full max-w-lg mx-auto">
                        <div class="flex flex-col sm:flex-row gap-4">
                            <mat-form-field class="w-full">
                                <mat-label>Primer nombre</mat-label>
                                <input matInput [formControlName]="'primerNombre'" readonly/>
                            </mat-form-field>
                            <mat-form-field class="w-full">
                                <mat-label>Segundo nombre</mat-label>
                                <input matInput [formControlName]="'segundoNombre'" readonly/>
                            </mat-form-field>
                        </div>
                        <div class="flex flex-col sm:flex-row gap-4">
                            <mat-form-field class="w-full">
                                <mat-label>Primer apellido</mat-label>
                                <input matInput [formControlName]="'primerApellido'" readonly/>
                            </mat-form-field>
                            <mat-form-field class="w-full">
                                <mat-label>Segundo apellido</mat-label>
                                <input matInput [formControlName]="'segundoApellido'" readonly/>
                            </mat-form-field>
                        </div>
                        <div class="flex flex-col sm:flex-row gap-4">
                            <mat-form-field class="w-full">
                                <mat-label>Identificación</mat-label>
                                <input matInput [formControlName]="'numDoc'" readonly/>
                            </mat-form-field>
                            <mat-form-field class="w-full">
                                <mat-label>Email</mat-label>
                                <input matInput [formControlName]="'correo'" readonly/>
                            </mat-form-field>
                        </div>
                        <div class="flex flex-col">
                            <mat-form-field class="w-full">
                                <mat-label>Crédito</mat-label>
                                <input matInput [formControlName]="'credito'" readonly/>
                            </mat-form-field>
                        </div>
                        <div class="flex flex-col">
                            <mat-form-field class="w-full">
                                <mat-label>Número de cuenta</mat-label>
                                <input matInput [formControlName]="'numCuentaBancaria'" readonly/>
                            </mat-form-field>
                        </div>
                    </form>
                    <div class="flex flex-wrap justify-center sm:justify-center gap-4 mt-2">
                        <button mat-button (click)="cerrar()" class="sm:w-auto w-full py-2 px-4 text-white bg-crediorange-100 rounded-lg">Cancelar</button>
                        <button mat-button [disabled]="secondFormGroup.invalid" matStepperNext class="sm:w-auto w-full py-2 px-4 text-white bg-crediblue-50 rounded-lg hover:bg-opacity-80">Siguiente</button>
                    </div>
                </div>
            </mat-step>

            <!-- Segundo paso: Información del Documento -->
            <mat-step [stepControl]="thirdFormGroup" label="Confirmar desembolso">
                <div class="w-full h-full p-4 sm:p-8">
                    <form [formGroup]="thirdFormGroup" class="space-y-4 w-full max-w-lg mx-auto">
                        <div class="flex flex-col sm:flex-row items-baseline gap-4">
                            <mat-form-field class="w-full" floatLabel="always">
                                <mat-label>Número de comprobante</mat-label>
                                <input matInput placeholder="Número de comprobante" [formControlName]="'numeroFactura'"/>
                                <mat-error *ngIf="(comprobante.touched || comprobante.dirty) && comprobante.hasError('required')">El campo es requerido!</mat-error>
                            </mat-form-field>

                            <mat-form-field class="w-full" floatLabel="always">
                                <mat-label>Valor de la transferencia</mat-label>
                                <input matInput [formControlName]="'montoConsumo'" [mask]="'separator.0'" thousandSeparator="." placeholder="Valor"/>
                                <mat-error *ngIf="(montoConsumo.touched || montoConsumo.dirty) && montoConsumo.hasError('required')">El valor es requerido!</mat-error>
                                <mat-error *ngIf="(montoConsumo.touched || montoConsumo.dirty) && montoConsumo.hasError('notEqual')">El valor ingresado no puede superar el cupo disponible!</mat-error>
                            </mat-form-field>
                        </div>
                        <div class="flex flex-col sm:flex-row gap-4">
                            <mat-form-field class="w-full" floatLabel="always">
                                <mat-label>Cuenta de origen</mat-label>
                                <mat-select [formControlName]="'idCuentaBancaria'" placeholder="Cuenta de origen">
                                    <mat-option [value]="cuenta.idTipoCuenta" *ngFor="let cuenta of cuentas">{{ cuenta.nombreBanco }}</mat-option>
                                </mat-select>
                            </mat-form-field>

                            <mat-form-field class="w-full" floatLabel="always">
                                <mat-label>Cuenta destino</mat-label>
                                <input matInput [formControlName]="'cuentaDestino'" placeholder="Cuenta destino"/>
                                <mat-error *ngIf="(cuentaDestino.touched || cuentaDestino.dirty) && cuentaDestino.hasError('required')">El campo es requerido!</mat-error>
                            </mat-form-field>
                        </div>
                    </form>
                    <div class="flex flex-wrap justify-center sm:justify-center gap-4 mt-2">
                        <button mat-button matStepperPrevious class="sm:w-auto w-full py-2 px-4 text-white bg-gray-500 rounded-lg hover:bg-gray-600">Anterior</button>
                        <button (click)="onSave()" [disabled]="thirdFormGroup.invalid" mat-button class="sm:w-auto w-full py-2 px-4 text-white bg-crediblue-50 rounded-lg hover:bg-opacity-80">Confirmar</button>
                    </div>
                </div>
            </mat-step>

            <!-- Resumen de desembolso -->
            <mat-step label="Resumen de desembolso">
                <div class="w-full px-4 sm:px-8" *ngIf="detaleConsumo">
                    <div class="max-w-2xl mx-auto p-6 bg-white shadow-lg rounded-lg">
                        <div class="border-b pb-4 mb-4 text-center">
                            <h2 class="text-2xl font-bold text-gray-800">Resumen de desembolso</h2>
                            <p class="text-sm text-gray-500">Revise los detalles</p>
                        </div>
                        <div class="space-y-4">
                            <!-- Detalles del resumen -->
                            <div class="flex justify-between items-center border-b pb-2">
                                <div><h3 class="text-lg font-semibold text-gray-700">Fecha</h3></div>
                                <p class="text-lg font-bold text-gray-800">{{ detaleConsumo.fechaCreacion | date: 'dd/MM/yyyy' }}</p>
                            </div>
                            <div class="flex justify-between items-center border-b pb-2">
                                <div><h3 class="text-lg font-semibold text-gray-700">Número de comprobante</h3></div>
                                <p class="text-lg font-bold text-gray-800">{{ detaleConsumo.numeroFactura }}</p>
                            </div>
                            <div class="flex justify-between items-center border-b pb-2">
                                <div><h3 class="text-lg font-semibold text-gray-700">Valor</h3></div>
                                <p class="text-lg font-bold text-gray-800">{{ detaleConsumo.montoConsumo }}</p>
                            </div>
                            <div class="flex justify-between items-center border-b pb-2">
                                <div><h3 class="text-lg font-semibold text-gray-700">Cuenta de origen</h3></div>
                                <p class="text-lg font-bold text-gray-800">{{ detaleConsumo.cuentaOrigen }}</p>
                            </div>
                            <div class="flex justify-between items-center">
                                <div><h3 class="text-lg font-semibold text-gray-700">Cuenta destino</h3></div>
                                <p class="text-lg font-bold text-gray-800">{{ detaleConsumo.cuentaDestino }}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </mat-step>
        </mat-stepper>
    </div>
</div>
